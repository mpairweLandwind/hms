<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <p:dialog header="Edit Appointment" 
              widgetVar="editAppointmentDialog" 
              modal="true" 
              resizable="false"
              width="600" 
              height="500"
              styleClass="appointment-dialog">
        
        <h:form id="editAppointmentForm">
            <p:messages id="messages" showDetail="true" closable="true" />
            
            <div class="p-grid">
                <!-- Reason -->
                <div class="p-col-12">
                    <p:outputLabel for="editReason" value="Reason for Visit:" styleClass="required-field"/>
                    <p:inputTextarea id="editReason" 
                                    value="#{appointmentController.appointmentRequest.reason}"
                                    rows="3"
                                    maxlength="500"
                                    required="true"
                                    requiredMessage="Please provide a reason for the visit"
                                    styleClass="full-width" />
                </div>
                
                <!-- Priority -->
                <div class="p-col-12">
                    <p:outputLabel for="editPriority" value="Priority:" />
                    <p:selectOneMenu id="editPriority" 
                                    value="#{appointmentController.appointmentRequest.priority}"
                                    styleClass="full-width">
                        <f:selectItem itemLabel="Routine" itemValue="ROUTINE" />
                        <f:selectItem itemLabel="Urgent" itemValue="URGENT" />
                        <f:selectItem itemLabel="Emergency" itemValue="EMERGENCY" />
                    </p:selectOneMenu>
                </div>
                
                <!-- Notes -->
                <div class="p-col-12">
                    <p:outputLabel for="editNotes" value="Additional Notes:" />
                    <p:inputTextarea id="editNotes" 
                                    value="#{appointmentController.appointmentRequest.notes}"
                                    rows="3"
                                    maxlength="1000"
                                    styleClass="full-width" />
                </div>
            </div>
            
            <div class="dialog-buttons">
                <p:commandButton value="Update Appointment" 
                                icon="pi pi-check"
                                action="#{appointmentController.updateAppointment}"
                                update="messages, :appointmentsForm:appointmentsTable"
                                styleClass="ui-button-success"/>
                
                <p:commandButton value="Cancel" 
                                icon="pi pi-times"
                                onclick="PF('editAppointmentDialog').hide()"
                                type="button"
                                styleClass="ui-button-secondary"/>
            </div>
        </h:form>
    </p:dialog>
</ui:composition>
