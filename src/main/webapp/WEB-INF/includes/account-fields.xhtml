<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <div class="form-grid">
        <div class="form-group">
            <p:outputLabel for="username" value="Username *" styleClass="form-label required">
                <i class="pi pi-user label-icon" aria-hidden="true"></i>
            </p:outputLabel>
            <p:inputText id="username" 
                       value="#{controller.registrationDTO.username}" 
                       required="true" 
                       placeholder="Choose a unique username"
                       styleClass="form-input"
                       maxlength="50">
                <f:validateLength minimum="3" maximum="50"/>
                <f:validateRegex pattern="^[a-zA-Z0-9_]{3,50}$" 
                               message="Username must be 3-50 characters (letters, numbers, underscores only)"/>
                <p:ajax event="blur" 
                      listener="#{controller.validateUsername}" 
                      update="messages"/>
            </p:inputText>
            <p:message for="username" styleClass="field-error"/>
        </div>
        
        <div class="form-group">
            <p:outputLabel for="email" value="Email Address *" styleClass="form-label required">
                <i class="pi pi-envelope label-icon" aria-hidden="true"></i>
            </p:outputLabel>
            <p:inputText id="email" 
                       value="#{controller.registrationDTO.email}" 
                       required="true" 
                       placeholder="your.email@example.com"
                       styleClass="form-input"
                       maxlength="100">
                <f:validateRegex pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" 
                               message="Please enter a valid email address"/>
                <p:ajax event="blur" 
                      listener="#{controller.validateEmail}" 
                      update="messages"/>
            </p:inputText>
            <p:message for="email" styleClass="field-error"/>
        </div>
    </div>
    
    <div class="form-group">
        <p:outputLabel for="password" value="Password *" styleClass="form-label required">
            <i class="pi pi-lock label-icon" aria-hidden="true"></i>
        </p:outputLabel>
        <p:password id="password" 
                  value="#{controller.registrationDTO.password}" 
                  required="true" 
                  feedback="true"
                  placeholder="Create a strong password"
                  styleClass="form-input"
                  toggleMask="true"
                  maxlength="50">
            <f:validateLength minimum="6" maximum="50"/>
            <f:validateRegex pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&amp;])[A-Za-z\d@$!%*?&amp;]{6,50}$"
                           message="Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"/>
        </p:password>
        <p:message for="password" styleClass="field-error"/>
    </div>
    
    <div class="form-group">
        <p:outputLabel for="confirmPassword" value="Confirm Password *" styleClass="form-label required">
            <i class="pi pi-lock label-icon" aria-hidden="true"></i>
        </p:outputLabel>
        <p:password id="confirmPassword" 
                  value="#{controller.registrationDTO.confirmPassword}" 
                  required="true" 
                  placeholder="Confirm your password"
                  styleClass="form-input"
                  feedback="false"
                  maxlength="50">
            <f:validateLength minimum="6" maximum="50"/>
        </p:password>
        <p:message for="confirmPassword" styleClass="field-error"/>
    </div>

</ui:composition>
